<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batangas City Jeepney Routes with ETA</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="map"></div>
    
    <div class="sidebar" id="sidebar">
        <button class="sidebar-toggle" id="sidebarToggle">☰</button>
        
        <h3 style="margin-top: 0; color: #2c3e50;">🚙 Batangas City Jeepney Routes</h3>
        <input type="text" class="search-box" placeholder="🔍 Search routes..." id="searchBox">
        
        <div class="route-planner">
    <h4 class="section-title">📍 Route Planner</h4>
    
    <div class="location-buttons">
        <button class="location-btn" onclick="app.useMyLocation('start', event)">📍 Use My Location (Start)</button>
        <button class="location-btn" onclick="app.useMyLocation('end', event)">📍 Use My Location (End)</button>
    </div>
    
    <div class="input-with-suggestions">
        <input type="text" id="startLocation" placeholder="Start location" class="search-box" style="margin-bottom: 5px;">
        <div class="suggestions-list" id="startSuggestions"></div>
    </div>
    
    <div class="input-with-suggestions">
        <input type="text" id="endLocation" placeholder="Destination" class="search-box" style="margin-bottom: 10px;">
        <div class="suggestions-list" id="endSuggestions"></div>
    </div>
    
    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
        <label class="discount-toggle" style="font-size:0.95em; display:flex; align-items:center; gap:8px;">
            <input type="checkbox" id="discountToggle"> Student / PWD (20% off)
        </label>
    </div>

    <button class="control-btn success" onclick="routePlanner.planRoute()">Find Best Route</button>
    <button class="control-btn secondary" onclick="clearInputsAndRoutes()">🗑️ Clear All</button>
    <div id="route-options" class="route-options"></div>
</div>
        
        <div class="route-controls">
            <button class="control-btn" onclick="routeManager.showAllRoutes()">Show All Routes</button>
            <button class="control-btn secondary" onclick="routeManager.clearAllRoutes()">Clear All Routes</button>
            <button class="control-btn" onclick="trafficLayer.toggleTraffic()" id="trafficToggle">Show Traffic</button>
        </div>
        
        <div class="time-controls">
            <h4 class="section-title">🕐 Simulate Departure Time</h4>
            <input type="range" min="0" max="23" value="12" class="time-slider" id="timeSlider">
            <div class="time-display" id="timeDisplay">12:00 PM</div>
        </div>
        
        <div class="loading" id="loading">Calculating route and ETA... 🗺️</div>
        
        <h4 class="section-title">🚍 Available Routes</h4>
        <div id="routes-list"></div>
        
        <div id="route-details" class="route-details" style="display: none;"></div>
        
        <div class="favorites">
            <h4 class="section-title">⭐ Favorite Routes</h4>
            <div id="favorites-list"></div>
        </div>
        
        <div class="statistics">
            <h4 class="section-title">📊 Route Statistics</h4>
            <div id="route-stats">
                <div class="stat-item">
                    <span>Total Routes:</span>
                    <span id="total-routes">0</span>
                </div>
                <div class="stat-item">
                    <span>Active Today:</span>
                    <span id="active-routes">0</span>
                </div>
                <div class="stat-item">
                    <span>Main Routes:</span>
                    <span id="main-routes">0</span>
                </div>
                <div class="stat-item">
                    <span>Feeder Routes:</span>
                    <span id="feeder-routes">0</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="legend">
        <h4 style="margin-top: 0;">Jeep Route Colors</h4>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #ffeb3b; border-color: #fbc02d;"></div>
            <span>Yellow Routes</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #f44336; border-color: #d32f2f;"></div>
            <span>Red Routes</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #ffffff; border-color: #bdbdbd;"></div>
            <span>White Routes</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #ff9800; border-color: #f57c00;"></div>
            <span>Orange Routes</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #4caf50; border-color: #388e3c;"></div>
            <span>Green Routes</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #2196f3; border-color: #1976d2;"></div>
            <span>Blue Routes</span>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>